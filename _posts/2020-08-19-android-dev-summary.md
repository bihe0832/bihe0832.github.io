---
layout: post
title: 安卓组件化总纲
category: 终端开发
tags: tags
keywords: 安卓 组件化
description: 开始做酱油的时候发现做开发那么久竟然没有一整套顺手的开发方案，要从头开始一个一个搭建（相当于之前做的就没什么沉淀），因此开始逐渐整理一整套相对全面并且顺手的开发方案。随着这几年逐渐完善，现在基本上具备雏形了，逐渐总结一下。
---

开始做酱油的时候发现做开发那么久竟然没有一整套顺手的开发方案，要从头开始一个一个搭建（相当于之前做的就没什么沉淀），因此开始逐渐整理一整套相对全面并且顺手的开发方案。随着这几年逐渐完善，现在基本上具备雏形了，逐渐总结一下。

接下来将会从代码框架、开发模式、工具和流程三个方向逐渐整理总结出来，可能也会把之前写的一些东西再次回顾、升级、整合一下。目前暂时先写一个大纲和大概，详细内容后续逐渐完善

## 开发中遇到的问题

在终端项目的开发中，我们都绕不开几个问题：

- 应用内的业务关系非常复杂，但前期没有设计好框架

	很多业务甚至单个项目只有一个模块，然后各业务功能相互依赖和调用。一些核心业务动辄就是上万行的代码，关键是里面一半以上的代码是和自身逻辑没有直接关系的。
	
	当然UI也是如此，多个功能整合在一个界面里面，界面的数据、UI、操作等没有分离，有些首页一个UI文件基本上就包含了整个应用的大部分界面。然后因为再通过各种业务逻辑互相耦合的去控制UI表现。
	
	如果前期没有做好解耦，当随着业务增加，项目成员越来越多的时候，项目开发维护的成本会非常高。这样复杂的关系下无论是新功能开发还是老版本调整都会非常痛苦，甚至下线个已有的功能都非常复杂，引入一堆问题。

- 项目随着发展越来越大，开发效率越来越低
    
	当项目发展到一定阶段，逐渐庞大以后，由于需要编译的内容太多开发过程中编译、构建等都会耗费大量的开发时间。即使可以使用instant run等工具优化编译的时间，但都是治标不治本，开发的效率并不会很明显

- 代码复用

	虽然不同项目间可以复用的代码很多，但是平时开发中都习惯了只有一些完备的功能才使用或者找专门的类库。对于一些简单又常用的基础和公共逻辑，目前代码复用的方式还停留在代码文件或者代码片段的复用，而且可能每次都是用的时候随便网上找，搜索复制粘贴。甚至有些时候为了赶需求，项目中已经有一份了，但懒得找，再引入一份进来。
	
	这种代码复用的方式会带来的最大问题就是对于同一个逻辑怎么同步修改所有使用的地方。这种修改可能是你做的一些定制化的修改，也可能是本身的bug。由于是复制粘贴，所以你可能也不记得还有哪里用过。结果就是同一个问题反复遇到，反复修改。而且随着时间积累，这些代码的差异越来越大，开发维护的成本就会越来越高
	
## 新方案设计的总体方向

在新方案的设计和优化过程中，我们重点思考和解决的也主要是上面的几个问题，最终目标是一套代码可以支持所有项目，即使不能支持所有项目，也要做到相同逻辑的代码尽可能只有一份。

对于开发框架，设计几个核心原则就是分层、解耦、依赖隔离，组件化开发。

对于开发模式的优化，主要是集中在怎么更好的提升开发效率，完善基础工具

对于工具和流程，更多的关注点在持续集成、自动化工具、代码规范等。

在下面的文章中，将会详细的介绍在这几个方面我们做的一些沉淀。

## 相关文章和链接

### 开发框架

- 待添加

### 开发模式

- 待添加

### 工具和流程

- Android-GetAPKInfo

	通过命令行或者安装APK后 获取 手机已安装应用基本信息的工具集，对应Github 为：[https://github.com/bihe0832/Android-GetAPKInfo](https://github.com/bihe0832/Android-GetAPKInfo)

- Gradle-Dependencies-Check

	梳理并检查项目中多个 module 的 gradle 依赖配置是否存在冲突的工具，对应Github 为 [https://github.com/bihe0832/Gradle-Dependencies-Check](https://github.com/bihe0832/Gradle-Dependencies-Check)


